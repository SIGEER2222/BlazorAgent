@using MudBlazorLab.Components.SystemModule.InspectionSystem.Components.InspectionCommon
@namespace MudBlazorLab.Components.SystemModule.InspectionSystem.Components.ProcessInspection

<DocListBase FormType="FormTable.过程检验单"
             OnNewDocAsync="OnNewDocAsync"
             ValidateExtra="ValidateExtra"
             MapExtraToForm="MapExtraToForm"
             OpenObjectsPanel="OpenObjectsPanel">
    <ExtraFields>
        <MudAutocomplete T="string" @bind-Value="FormLine" Label="产线" Placeholder="产线" SearchFunc="SearchLines"
                         CoerceText="true" CoerceValue="true" Clearable="true" Dense="true" />
        <MudBlazorLab.Components.SystemModule.InspectionSystem.Components.GridDataGridSelect TItem="fab_work_order" Items="@FilteredWorkOrderOptions"
            @bind-SelectedItems="WorkOrders" DisplayTextSelector="@(p => p.WorkOrder)" Label="工单">
            <ColumnsTemplate>
                <PropertyColumn T="fab_work_order" TProperty="string" Property="@(x => x.ProductName)" Title="产品名称" />
                <PropertyColumn T="fab_work_order" TProperty="string" Property="@(x => x.WorkOrder)" Title="工单号" />
                <PropertyColumn T="fab_work_order" TProperty="string" Property="@(x => x.PlanNedStartDate.ToString("yyyy-MM-dd"))" Title="计划开始时间" />
                <PropertyColumn T="fab_work_order" TProperty="string" Property="@(x => x.PlanNeddueDate.ToString("yyyy-MM-dd"))" Title="计划结束时间" />
            </ColumnsTemplate>
        </MudBlazorLab.Components.SystemModule.InspectionSystem.Components.GridDataGridSelect>
    </ExtraFields>
</DocListBase>
